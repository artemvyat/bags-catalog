<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>–ö–∞—Ç–∞–ª–æ–≥ —Å—É–º–æ–∫</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: var(--tg-theme-bg-color, #ffffff);
            color: var(--tg-theme-text-color, #000000);
            min-height: 100vh;
            -webkit-tap-highlight-color: transparent;
        }
        .container { max-width: 600px; margin: 0 auto; padding: 16px; }
        .hidden { display: none !important; }
        h1 { text-align: center; margin-bottom: 20px; font-size: 22px; font-weight: 700; }
        .catalog-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 12px; }
        .bag-card {
            background: var(--tg-theme-secondary-bg-color, #f0f0f0);
            border-radius: 14px; overflow: hidden; cursor: pointer;
            transition: transform 0.15s ease; -webkit-user-select: none; user-select: none;
            animation: fadeIn 0.3s ease forwards;
        }
        .bag-card:active { transform: scale(0.96); }
        .bag-card img { width: 100%; aspect-ratio: 1; object-fit: cover; display: block; }
        .card-name { padding: 10px 8px; font-size: 13px; font-weight: 600; text-align: center; line-height: 1.3; }
        .back-btn {
            background: none; border: none; color: var(--tg-theme-link-color, #3390ec);
            font-size: 16px; font-weight: 500; cursor: pointer; padding: 8px 0; margin-bottom: 12px;
        }
        .confirm-card {
            background: var(--tg-theme-secondary-bg-color, #f0f0f0);
            border-radius: 16px; overflow: hidden; text-align: center;
        }
        .confirm-card img { width: 100%; max-height: 55vh; object-fit: contain; display: block; background: #f8f8f8; }
        .confirm-card h2 { padding: 16px 16px 4px; font-size: 20px; font-weight: 700; }
        .confirm-hint { padding: 4px 16px 16px; font-size: 14px; color: var(--tg-theme-hint-color, #999); }
        .confirm-btn {
            width: calc(100% - 32px); margin: 0 16px 20px; padding: 16px;
            font-size: 16px; font-weight: 700; border: none; border-radius: 12px;
            background: var(--tg-theme-button-color, #3390ec);
            color: var(--tg-theme-button-text-color, #ffffff);
            cursor: pointer; transition: opacity 0.15s;
        }
        .confirm-btn:active { opacity: 0.7; }
        .confirm-btn.loading { opacity: 0.6; pointer-events: none; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(8px); } to { opacity: 1; transform: translateY(0); } }
        .bag-card:nth-child(2) { animation-delay: 0.05s; }
        .bag-card:nth-child(3) { animation-delay: 0.1s; }
        .bag-card:nth-child(4) { animation-delay: 0.15s; }
    </style>
</head>
<body>
    <div class="container" id="catalog-screen">
        <h1>üëú –í—ã–±–µ—Ä–∏—Ç–µ –º–æ–¥–µ–ª—å</h1>
        <div id="catalog" class="catalog-grid"></div>
    </div>

    <div class="container hidden" id="confirm-screen">
        <button class="back-btn" id="back-btn">‚Üê –ù–∞–∑–∞–¥</button>
        <div class="confirm-card">
            <img id="confirm-image" src="" alt="">
            <h2 id="confirm-name"></h2>
            <p class="confirm-hint">–≠—Ç–∞ —Å—É–º–∫–∞ –±—É–¥–µ—Ç –ø—Ä–∏–º–µ—Ä–µ–Ω–∞ –Ω–∞ –≤–∞—à–µ–º —Ñ–æ—Ç–æ</p>
            <button id="confirm-btn" class="confirm-btn">‚ú® –ü—Ä–∏–º–µ—Ä–∏—Ç—å —ç—Ç—É —Å—É–º–∫—É</button>
        </div>
    </div>

    <script>
        const tg = window.Telegram.WebApp;
        tg.ready();
        tg.expand();

                const catalog = [
            {id: "sstyle_–º–∏–Ω–∏_beige_mix", name: "SStyle –º–∏–Ω–∏ beige mix", image: "SStyle –º–∏–Ω–∏ beige mix.jpg"},
            {id: "vogue_bag_long_xs_brown", name: "Vogue bag Long XS brown", image: "Vogue bag Long XS brown.jpg"},
            {id: "vogue_bag_m_beige", name: "Vogue bag M beige", image: "Vogue bag M beige.jpg"},
            {id: "–Ω–µ—Å–µ—Å—Å–µ—Ä_–∏–∑_—ç–∫–æ–Ω—É–±—É–∫–∞_ohra", name: "–ù–µ—Å–µ—Å—Å–µ—Ä –∏–∑ —ç–∫–æ-–Ω—É–±—É–∫–∞ ohra", image: "–ù–µ—Å–µ—Å—Å–µ—Ä –∏–∑ —ç–∫–æ-–Ω—É–±—É–∫–∞ ohra.jpg"}
        ];

        let selectedBag = null;

        const catalogScreen = document.getElementById('catalog-screen');
        const confirmScreen = document.getElementById('confirm-screen');
        const catalogGrid = document.getElementById('catalog');
        const confirmImage = document.getElementById('confirm-image');
        const confirmName = document.getElementById('confirm-name');
        const confirmBtn = document.getElementById('confirm-btn');
        const backBtn = document.getElementById('back-btn');

        function renderCatalog() {
            catalogGrid.innerHTML = catalog.map(bag =>
                '<div class="bag-card" onclick="selectBag(\'' + bag.id + '\')">' +
                '<img src="' + encodeURI(bag.image) + '" alt="' + bag.name + '" loading="lazy">' +
                '<div class="card-name">' + bag.name + '</div></div>'
            ).join('');
        }

        function selectBag(bagId) {
            selectedBag = catalog.find(b => b.id === bagId);
            if (!selectedBag) return;
            try { tg.HapticFeedback.impactOccurred('light'); } catch(e) {}
            confirmImage.src = encodeURI(selectedBag.image);
            confirmName.textContent = selectedBag.name;
            catalogScreen.classList.add('hidden');
            confirmScreen.classList.remove('hidden');
            try { tg.BackButton.show(); } catch(e) {}
        }

        confirmBtn.addEventListener('click', function() {
            if (!selectedBag) return;
            try { tg.HapticFeedback.notificationOccurred('success'); } catch(e) {}
            confirmBtn.classList.add('loading');
            confirmBtn.textContent = '‚è≥ –û—Ç–ø—Ä–∞–≤–∫–∞...';
            tg.sendData(JSON.stringify({
                action: 'select_bag',
                bag_id: selectedBag.id,
                bag_name: selectedBag.name
            }));
        });

        function goBack() {
            confirmScreen.classList.add('hidden');
            catalogScreen.classList.remove('hidden');
            selectedBag = null;
            try { tg.BackButton.hide(); tg.HapticFeedback.impactOccurred('light'); } catch(e) {}
        }

        backBtn.addEventListener('click', goBack);
        try { tg.BackButton.onClick(goBack); } catch(e) {}

        renderCatalog();
    </script>
</body>
</html>

